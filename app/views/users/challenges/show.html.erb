<center>
  <h1>Solo Challenge!</h1>
</center>

  <% if @challenge.game_status == "before" %>
<center>
    <main class="game-info-main">
      <h2> <%="#{@challenge.basket_size}"%> Ingredients </h2>
      <h2> <%="#{@challenge.time_limit}"%> Minutes</h2>
      <h2>Can You Handle The Heat?</h2>
      <h2><%= button_to "Let's Get Choppin'!", "/users/challenges/#{@challenge.id}", params: {game_event: "playing"}, method: :patch %></h2>
      <iframe src="https://giphy.com/embed/l2SqeoNIBb432sF44" width="480" height="330" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
    </main>
</center>

  <% elsif @challenge.game_status == "playing" %>
  <center>
    <main class="game-play-main">
      <%= audio_tag "1-03 Love Tractor.mp3", id: "sound", class: "ausio-to-play", autoplay: true %>
      <h2><%="#{@challenge.meal_type.capitalize}"%> Challenge</h2>
      <h1>Mystery Basket Ingredients:</h1>
      <h2><% @challenge.basket_contents.each do |ingredient|%></h2>
          <section id=ingredient-"<%= ingredient.id %>">
            <h2><%= ingredient.name %></h2>
          </section>
          <% end %>
          <iframe src="https://giphy.com/embed/demgpwJ6rs2DS" width="480" height="359" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
      <h2><%= button_to "Pause Game", "/users/challenges/#{@challenge.id}", params: {game_event: "pause"}, method: :patch %></h2>
      <h2><%= button_to "Cancel Game", "/users/challenges/#{@challenge.id}", params: {game_event: "cancel"}, method: :patch %></h2>
      <h2><%= button_to "I Finished Early!", "/users/challenges/#{@challenge.id}", params: {game_event: "done"}, method: :patch %></h2>
    </main>
  </center>

  <% elsif @challenge.game_status == "paused" %>
  <center>
    <main class="game-paused-main">
      <h2>You're making <%="#{@challenge.meal_type}"%>!</h2>
      <h2><%= button_to "Resume Game", "/users/challenges/#{@challenge.id}", params: {game_event: "playing"}, method: :patch %></h2>
      <h2><%= button_to "Cancel Game", "/users/challenges/#{@challenge.id}", params: {game_event: "cancel"}, method: :patch %></h2>
      <h1>Game Paused</h1>
    </main>
  </center>

  <% elsif @challenge.game_status == "cancelled" %>
  <center>
    <main class="game-cancelled-main">
      <h2>This game has been cancelled.</h2>
      <h2>Click here for recipe ideas using your basket ingredients.</h2>
      <h2><h2>Would you like to try again with a fresh basket?</h2></h2>
      <h2><%= button_to "Start New Game", "/users/challenges/new", method: :get %></h2><br>
      <h2>Would you like to change your pantry ingredients?</h2>
      <h2><%= button_to "Your Pantry", "/users/ingredients", method: :get %></h2>
    </main>
  </center>

  <% elsif @challenge.game_status == "done" %>
  <center>
    <main class="game-done-main">
      <h2>Congratulations!!</h2>
      <h2>Hope it tastes better than it looks! </br>
        Share photo of your creation below!</h2>
      <h2><%= form_with url: photos_path, model: @photo, local: true do |form| %>
            <%= form.label :image %>
            <%= form.file_field :image %>
            <%= submit_tag "Save Photo"  %>
          <% end %><br></h2>
      <h2><%= button_to "Don't Save a Photo", "/users/challenges/#{@challenge.id}", params: {game_event: "no_photo"}, method: :patch %></h2><br>
    </main>
  </center>

  <% elsif @challenge.game_status == "complete" %>
  <center>
    <main class="game-complete-main">
      <h1>Here Are Your Game Results!!</h1>
      <h2>Time: <%= @challenge.time_limit %> Minutes</h2>
      <h2>Cooking: <%= @challenge.meal_type.capitalize %></h2>
      <h2>Basket Ingredients:</h2>
      <% @challenge.ingredients.each do |ingredient|%>
          <section id=final_ingredient-"<%= ingredient.id %>">
            <h3><%= ingredient.name %></h3>
          </section>
          <% end %>
      <% if !@challenge.photos.empty? %>
        <section id='photos' style="width:400px; height:auto">
          <%= link_to image_tag(@challenge.photos.last.image, style:'width:100%'), challenges_path %>
        </section>
      <% end %>
      <h2><h2>Play Again?</h2></h2>
      <h2><%= button_to "Start New Game", "/users/challenges/new", method: :get %></h2><br>
      <h2>Update Pantry?</h2>
      <h2><%= button_to "Your Pantry", "/users/ingredients", method: :get %></h2>
      <h2><%= button_to "Your Dashboard", "/users/dashboard", method: :get %></h2>
    </main>
  </center>
  <% end %>
